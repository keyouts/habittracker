const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']; let habits = JSON.parse(localStorage.getItem('habits')) || {}; let currentHabit = Object.keys(habits)[0] || 'Default'; if (!habits[currentHabit]) { habits[currentHabit] = Array(7).fill(false); saveHabits(); } function saveHabits() { localStorage.setItem('habits', JSON.stringify(habits)); } function renderHabits() { const container = document.getElementById('habitControls'); container.innerHTML = ''; Object.keys(habits).forEach(habit => { const wrapper = document.createElement('div'); wrapper.className = 'habit-wrapper'; const btn = document.createElement('button'); btn.textContent = habit; btn.className = 'habit-btn' + (habit === currentHabit ? ' active' : ''); btn.onclick = () => { currentHabit = habit; renderHabits(); renderGrid(); }; const delBtn = document.createElement('button'); delBtn.textContent = 'âœ•'; delBtn.className = 'delete-btn'; delBtn.onclick = () => { delete habits[habit]; if (currentHabit === habit) { currentHabit = Object.keys(habits)[0] || 'Default'; if (!habits[currentHabit]) habits[currentHabit] = Array(7).fill(false); } saveHabits(); renderHabits(); renderGrid(); }; wrapper.appendChild(btn); wrapper.appendChild(delBtn); container.appendChild(wrapper); }); } function renderGrid() { const grid = document.getElementById('grid'); grid.innerHTML = ''; habits[currentHabit].forEach((checked, index) => { const div = document.createElement('div'); div.className = 'day' + (checked ? ' checked' : ''); div.textContent = days[index]; div.onclick = () => { habits[currentHabit][index] = !habits[currentHabit][index]; saveHabits(); renderGrid(); }; grid.appendChild(div); }); } function addHabit() { const name = document.getElementById('newHabit').value.trim(); if (name && !habits[name]) { habits[name] = Array(7).fill(false); currentHabit = name; saveHabits(); renderHabits(); renderGrid(); document.getElementById('newHabit').value = ''; } } function renameHabit() { const name = document.getElementById('newHabit').value.trim(); if (name && name !== currentHabit && !habits[name]) { habits[name] = habits[currentHabit]; delete habits[currentHabit]; currentHabit = name; saveHabits(); renderHabits(); renderGrid(); document.getElementById('newHabit').value = ''; } } renderHabits(); renderGrid();